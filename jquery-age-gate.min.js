!function(a){"use strict";function b(){var b=parseInt(a('input[name="age-gate-year"]').val(),10),c=parseInt(a('input[name="age-gate-month"]').val(),10),d=parseInt(a('input[name="age-gate-day"]').val(),10),e=new Date(b,c,d);return e}var c={whitelistSelector:'meta[name="age-restricted"][content="false"]',backdropId:"age-gate-backdrop",activeBackdropClass:"active",dialogSrc:"#age-gate-dialog",activeDialogClass:"active",invalidAgeDialogClass:"invalid",minimumAgeSelector:'[name="age-gate-minimum"]',parseUserDateFunction:b,enterButtonSelector:".age-gate-enter",focusSelector:'input[name="age-gate-month"]',expiration:1/0};a.ageGate=function(b){function d(b){m=a(b).appendTo("body"),g()}function e(){throw l.remove(),new Error("jQuery.ageGate was unable to find "+c.dialogSrc)}function f(){l.addClass(c.activeBackdropClass)}function g(){m.on("keypress",h).on("click",c.enterButtonSelector,i).addClass(c.activeDialogClass),m.find(c.focusSelector).focus()}function h(a){13===a.which&&(a.preventDefault(),j())}function i(a){a.preventDefault(),j()}function j(){var a=new Date,b=parseInt(m.find(c.minimumAgeSelector).val(),10),d=new Date(a.getFullYear()-b,a.getMonth(),a.getDay()),e=c.parseUserDateFunction();d>=e?o.resolve():(m.addClass(c.invalidAgeDialogClass),m.trigger("ageinvalidated"))}function k(){m.removeClass(c.invalidAgeDialogClass),m.trigger("agevalidated"),o.resolve(m),m.removeClass(c.activeDialogClass).off(),l.removeClass(c.activeBackdropClass).off(),a.ageGateCookieAdapter&&a.ageGateCookieAdapter.set(birthdate,c.expiration)}var l,m,n=a.ageGateCookieAdapter?a.ageGateCookieAdapter.get():void 0,o=new a.Deferred;if(a.isPlainObject(b)&&a.extend(c,b),!(a(c.whitelistSelector).length||n instanceof Date)){l=a(document.createElement("div")).attr("id",c.backdropId);try{m=a(c.dialogSrc)}catch(p){m=a()}return m.length?(m.before(l),window.setTimeout(f,0),window.setTimeout(g,0)):(l.appendTo("body"),window.setTimeout(f,0),a.ajax({url:c.dialogSrc}).done(d).fail(e)),o.done(k),o}}}(jQuery);
//# sourceMappingURL=jquery-age-gate.min.js.map